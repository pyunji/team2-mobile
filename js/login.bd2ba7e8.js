(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"49c2":function(t,e,a){"use strict";a("b0c0"),a("99af");var s=a("bc3a"),o=a.n(s),r=o.a.create({baseURL:"http://localhost:81"});function n(t){return r.post("/join2",{mid:t.id,mname:t.name,mpassword:t.password,menabled:t.enabled,mrole:t.role,memail:t.email,mphone:t.phone})}function i(t){return r.post("/login","mid=".concat(t.id,"&mpassword=").concat(t.password))}function l(t,e){return r.post("/checkPW","mid=".concat(t,"&mpassword=").concat(e))}e["a"]={join:n,login:i,checkPW:l}},dd7b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card-header",staticStyle:{"text-align":"center","font-weight":"bold","font-size":"18px"}},[t._v(" Login ")]),a("div",{staticClass:"card-body"},[""===t.$store.getters["userStore/getUserId"]?a("div",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[t._v("User ID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.id,expression:"user.id"}],staticClass:"form-control",attrs:{type:"text",id:"userId"},domProps:{value:t.user.id},on:{input:function(e){e.target.composing||t.$set(t.user,"id",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"userPassword"}},[t._v("User Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("div",{staticStyle:{"text-align":"right"}},[a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:t.handleLogin}},[t._v("로그인")])],1),a("div",{staticStyle:{"text-align":"right"}},[a("a",[t._v("현재 회원이 아니신가요? ")]),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:function(e){return t.handleJoin()}}},[t._v("회원 가입")])],1)]):t._e()]),t.alertDialog?a("alert-dialog",{attrs:{message:t.alertDialogMessage,loading:t.loading},on:{close:function(e){t.alertDialog=!1}}}):t._e()],1)},o=[],r=a("1da1"),n=(a("96cf"),a("49c2")),i=a("663b"),l={name:"Home",components:{AlertDialog:i["a"]},data:function(){return{user:{id:"",name:"사용자",password:"",role:"ROLE_USER",email:"user@mycompany.com"},loading:!1,alertDialog:!1,alertDialogMessage:""}},methods:{handleJoin:function(){this.$router.push({path:"/join"}).catch((function(){}))},handleLogin:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,t.alertDialog=!0,e.next=5,n["a"].login(t.user);case 5:a=e.sent,t.$store.dispatch("userStore/saveAuth",{userId:a.data.mid,authToken:a.data.jwt}),console.log("userId",a.data.mid),console.log("authToken",a.data.jwt),t.loading=!1,t.$router.go(-1),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0);try{401!==e.t0.response.status&&403!==e.t0.response.status||(t.loading=!1,t.alertDialogMessage="로그인 실패(아이디 또는 패스워드가 틀림)")}catch(s){t.loading=!1,t.alertDialogMessage="로그인 실패(네트워크 에러)"}finally{t.loading=!1}case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},handleLogout:function(){this.$store.dispatch("userStore/deleteAuth")}}},c=l,d=a("2877"),u=Object(d["a"])(c,s,o,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=login.bd2ba7e8.js.map