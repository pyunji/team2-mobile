{"version":3,"sources":["webpack:///./src/apis/auth.js","webpack:///./src/views/login.vue?f76a","webpack:///src/views/login.vue","webpack:///./src/views/login.vue?6b61","webpack:///./src/views/login.vue"],"names":["instance","axios","create","baseURL","join","user","post","mid","id","mname","name","mpassword","password","menabled","enabled","mrole","role","memail","email","mphone","phone","login","checkPW","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","$store","getters","directives","rawName","value","expression","attrs","domProps","on","$event","target","composing","$set","handleLogin","handleJoin","_e","alertDialogMessage","loading","alertDialog","staticRenderFns","components","AlertDialog","data","methods","$router","push","handleLogout","dispatch","component"],"mappings":"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","file":"js/login.bd2ba7e8.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'http://localhost:81'\r\n  //baseURL:'http://kosa1.iptime.org:50320'\r\n});\r\n\r\n/* 추가 끝 */\r\nfunction join(user) { //user={id:xxx, name:xxx, password:xxx, role:xxx, email:xxx}\r\n  /* axios의 모든 메서드는 promise를 리턴한다 */\r\n  // const promise = axios.post();\r\n  // return promise;\r\n  return instance.post(\r\n    \"/join2\",\r\n    {\r\n      mid:        user.id,\r\n      mname:      user.name,\r\n      mpassword:  user.password,\r\n      menabled:   user.enabled,\r\n      mrole:      user.role,\r\n      memail:     user.email,\r\n      mphone:     user.phone\r\n  }\r\n  );\r\n}\r\n\r\nfunction login(user) { //user={id:xxx, password:xxx}\r\n  // console.log(\"데이터 바인딩 확인 id :\", user.id);\r\n  // console.log(\"데이터 바인딩 확인 id :\", user.password);\r\n  return instance.post(\r\n    \"/login\",\r\n    `mid=${user.id}&mpassword=${user.password}`\r\n  );\r\n}\r\n\r\nfunction checkPW(id,password) {\r\n  // console.log(\"checkPW실행\");\r\n  // console.log(\"데이터 바인딩 확인 id :\", id);\r\n  // console.log(\"데이터 바인딩 확인 id :\", password);\r\n  return instance.post(\r\n    \"/checkPW\",\r\n    `mid=${id}&mpassword=${password}`\r\n  );\r\n}\r\n\r\nexport default {\r\n  join,\r\n  login,\r\n  checkPW\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card-header\",staticStyle:{\"text-align\":\"center\",\"font-weight\":\"bold\",\"font-size\":\"18px\"}},[_vm._v(\" Login \")]),_c('div',{staticClass:\"card-body\"},[(_vm.$store.getters['userStore/getUserId'] === '')?_c('div',[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"User ID\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.id),expression:\"user.id\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"userId\"},domProps:{\"value\":(_vm.user.id)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"id\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"for\":\"userPassword\"}},[_vm._v(\"User Password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})]),_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('b-button',{staticClass:\"mt-2\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\"로그인\")])],1),_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('a',[_vm._v(\"현재 회원이 아니신가요? \")]),_c('b-button',{staticClass:\"mt-2\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.handleJoin()}}},[_vm._v(\"회원 가입\")])],1)]):_vm._e()]),(_vm.alertDialog)?_c('alert-dialog',{attrs:{\"message\":_vm.alertDialogMessage,\"loading\":_vm.loading},on:{\"close\":function($event){_vm.alertDialog = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"card-header\" style=\"text-align:center; font-weight: bold; font-size:18px\">\r\n      Login\r\n    </div>\r\n    <div class=\"card-body\">\r\n      <div v-if=\"$store.getters['userStore/getUserId'] === ''\">\r\n        <div class=\"form-group\">\r\n          <label class=\"form-label\">User ID</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"userId\" v-model=\"user.id\"/>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"userPassword\" class=\"col-form-label\">User Password</label>\r\n          <input type=\"text\" class=\"form-control\" v-model=\"user.password\"/>\r\n        </div>\r\n        <div style=\"text-align:right\"><b-button variant=\"primary\" class=\"mt-2\" v-on:click=\"handleLogin\">로그인</b-button></div>\r\n        <div style=\"text-align:right\"><a>현재 회원이 아니신가요?  </a><b-button variant=\"primary\" class=\"mt-2\" v-on:click=\"handleJoin()\">회원 가입</b-button></div>\r\n      </div>\r\n    </div>\r\n    <alert-dialog\r\n    :message=\"alertDialogMessage\"\r\n    :loading=\"loading\"\r\n    v-if=\"alertDialog\"\r\n    @close=\"alertDialog = false\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport auth from \"@/apis/auth\";\r\nimport AlertDialog from \"@/components/dialog/AlertDialog.vue\";\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  components:{\r\n    AlertDialog,\r\n  },\r\n  data: () => ({\r\n    user: {\r\n      id: \"\",\r\n      name: \"사용자\",\r\n      password: \"\",\r\n      role: \"ROLE_USER\",\r\n      email: \"user@mycompany.com\"\r\n    },\r\n    loading:false,\r\n    alertDialog: false,\r\n    alertDialogMessage: \"\"\r\n  }),\r\n    // 컴포넌트 메서드 정의\r\n  methods: {\r\n    handleJoin() {\r\n      this.$router.push({path:\"/join\"}).catch(()=>{});\r\n    },\r\n    async handleLogin() {\r\n      try {\r\n        // console.log(\"데이터 바인딩 확인 id\", this.user.id);\r\n        // console.log(\"데이터 바인딩 확인 password\", this.user.password);\r\n        this.loading = true;\r\n        this.alertDialog = true;\r\n\r\n        const response = await auth.login(this.user);\r\n        this.$store.dispatch(\"userStore/saveAuth\", {\r\n          userId: response.data.mid,\r\n          authToken: response.data.jwt\r\n        });\r\n        console.log(\"userId\", response.data.mid);\r\n        console.log(\"authToken\", response.data.jwt);\r\n        this.loading = false;\r\n        this.$router.go(-1);\r\n      } catch(error) {\r\n        try {\r\n          if(error.response.status === 401 || error.response.status === 403) {\r\n            this.loading = false;\r\n            this.alertDialogMessage = \"로그인 실패(아이디 또는 패스워드가 틀림)\";\r\n          }\r\n        } catch (err){\r\n          this.loading = false;\r\n          this.alertDialogMessage = \"로그인 실패(네트워크 에러)\";          \r\n        } finally{\r\n          this.loading = false;\r\n        }\r\n      }\r\n    },\r\n    handleLogout() {\r\n      this.$store.dispatch(\"userStore/deleteAuth\");\r\n    }\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=0b909c6c&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}